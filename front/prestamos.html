<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Prestamos</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css">
        <link rel="stylesheet" href="/front/styles/header_footer.css">
    </head>
<body>
    <header>
        <!--header por header_footer.js-->
    </header>
    <section class="section is-medium">
        <div class="container" id="cuadro_principal">
            <div class="message-header is-flex is-justify-content-left" id="cuadro_encabezado">
                <h1 id="id_prestamo" class="title">
                    Lista de prestamos 
                </h1>
            </div>
            <div class="table-container" >
                <table class="table is-striped is-hoverable" id="tabla_principal">
                    <thead>
                        <tr>
                            <th id="tabla_columna">Id</th>
                            <th id="tabla_columna">Titulo</th>
                            <th id="tabla_columna">Socio</th>
                            <th id="tabla_columna">Fecha prestamo</th>
                            <th id="tabla_columna">Fecha devoluci√≥n</th>
                        </tr>
                        <tbody>
                        </tbody>
                    </thead>
                </table>
                <p id="error"></p>
            </div>
        </div>
    </section>
    <footer class="footer">
                        <!--footer por header_footer.js-->
    </footer>

    <script src="./src/header_footer.js" style="padding-bottom: 1.5rem; padding-top: 1.5rem;"></script>
    <script>
        fetch('http://localhost:3000/prestamos')
            .then((response) => response.json())
            .then((data) => {
                console.log(data.length);
                if (data.length === 0) {
                    const error = document.getElementById('error');
                    error.innerHTML = 'No hay prestamos :C';
                }
                else{
                const table = document.querySelector('table tbody');
                data.forEach(prestamo => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td id="tabla_columna" >${prestamo.id}</td>
                        <td id="tabla_columna" >${prestamo.titulo}</td>
                        <td id="tabla_columna" >${prestamo.socio}</td>
                        <td id="tabla_columna" >${prestamo.fecha_prestamo}</td>
                        <td id="tabla_columna" >${prestamo.fecha_devolucion}</td>
                    `;
                    table.appendChild(row);
                });
            }
            });

    </script>
</body>
</html>
